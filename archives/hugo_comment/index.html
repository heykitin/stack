<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='使用 Valine/Waline 为 Hugo 开启评论系统及配置'><title>为 Hugo 博客开启评论系统</title>
<link rel=canonical href=/archives/hugo_comment/><link rel=stylesheet href=/scss/style.min.aeb02fa9ea70598dee71dd721f7d7a295094dcb7206efbe20660b47991a0a07f.css><meta property='og:title' content='为 Hugo 博客开启评论系统'><meta property='og:description' content='使用 Valine/Waline 为 Hugo 开启评论系统及配置'><meta property='og:url' content='/archives/hugo_comment/'><meta property='og:site_name' content="Kitin's"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Hugo'><meta property='article:tag' content='Blog'><meta property='article:tag' content='Valine'><meta property='article:tag' content='Waline'><meta property='article:published_time' content='2022-10-15T10:50:47+08:00'><meta property='article:modified_time' content='2022-10-15T10:50:47+08:00'><meta name=twitter:title content="为 Hugo 博客开启评论系统"><meta name=twitter:description content="使用 Valine/Waline 为 Hugo 开启评论系统及配置"><link rel="shortcut icon" href=/favicon.ico><style>:root{--sys-font-family:"Noto Serif SC",;--zh-font-family:"Noto Serif SC";--base-font-family:"Noto Serif SC";--code-font-family:"Consolas";--article-font-family:"Noto Serif SC"}</style><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu3062918ec655b699aef6c10c56bc778d_207173_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Kitin's</a></h1><h2 class=site-description></h2></div></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>主页</span></a></li><li><a href=/%E5%85%B3%E4%BA%8E/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>关于</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>归档</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>搜索</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#前言>前言</a><ol><li><a href=#评论系统选择>评论系统选择</a></li></ol></li><li><a href=#通用配置>通用配置</a><ol><li><a href=#注册-leancloud>注册 LeanCloud</a></li></ol></li><li><a href=#评论系统配置>评论系统配置</a><ol><li><a href=#valine-配置>Valine 配置</a></li><li><a href=#waline-配置>Waline 配置</a><ol><li><a href=#通过-vercel-部署服务端>通过 Vercel 部署服务端</a></li><li><a href=#引入-waline-及配置>引入 Waline 及配置</a></li></ol></li><li><a href=#评论管理>评论管理</a></li></ol></li><li><a href=#总结>总结</a></li><li><a href=#参考资料>参考资料</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/archives/hugo_comment/>为 Hugo 博客开启评论系统</a></h2><h3 class=article-subtitle>使用 Valine/Waline 为 Hugo 开启评论系统及配置</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Oct 15, 2022</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 4 分钟</time></div></footer></div></header><section class=article-content><h2 id=前言>前言</h2><p>我的博客作为自己记录的地方，没有去做 SEO 也没有去进行优化；可以说完全没有必要去开启评论，但是为什么又添加了评论呢？我觉得万一有人看到了我博客中的一些内容，有什么没有了解的地方，或者说有什么地方需要进行交流，需要进行简单的评论该怎么办？为了这一两句话不可能去到邮箱里跟你进行深度交流，于是最后还是决定开启评论功能，并再此进行一个分享。</p><h3 id=评论系统选择>评论系统选择</h3><p>对于评论系统，我的感觉是一定要便捷，填上昵称，邮件等就可以进行评论，不需要进行注册等繁琐操作； Hugo 中也有许多自带的评论系统，但是大多数都是海外的，使用起来很不方便。最终决定使用基于 Valine 的 Waline ；下面就来讲一下我自己配置的过程。</p><hr><h2 id=通用配置>通用配置</h2><h3 id=注册-leancloud>注册 LeanCloud</h3><ul><li><a class=link href=https://leancloud.app target=_blank rel=noopener>LeanCloud 国际版
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li></ul><p>推荐使用国际版，国内版的话需要绑定已备案域名，比较麻烦。。。首先 <a class=link href=https://console.leancloud.app/login target=_blank rel=noopener>登陆
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>
</a>或 <a class=link href=https://console.leancloud.app/register target=_blank rel=noopener>注册
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>
</a><strong>LeanCloud国际版</strong> 并进入 <a class=link href=https://console.leancloud.app/apps target=_blank rel=noopener>控制台
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p><p>进入控制台后，点击创建应用，输入你喜欢的应用名称，选择开发版，然后点击创建：</p><p><img src=/archives/hugo_comment/1.png width=1356 height=651 srcset="/archives/hugo_comment/1_hu0053b852f29d033712973e6338b1d12a_42681_480x0_resize_box_3.png 480w, /archives/hugo_comment/1_hu0053b852f29d033712973e6338b1d12a_42681_1024x0_resize_box_3.png 1024w" loading=lazy alt="◎ 创建应用" class=gallery-image data-flex-grow=208 data-flex-basis=499px></p><p>进入应用，选择左下角的 <strong>设置 > 应用凭证</strong> 。你可以看到你的各种凭证，先放在这里，后面会用上：</p><p><img src=/archives/hugo_comment/2.png width=1107 height=766 srcset="/archives/hugo_comment/2_hu2bf2bd5f17c732278b663374181046d9_69067_480x0_resize_box_3.png 480w, /archives/hugo_comment/2_hu2bf2bd5f17c732278b663374181046d9_69067_1024x0_resize_box_3.png 1024w" loading=lazy alt="◎ 应用凭证" class=gallery-image data-flex-grow=144 data-flex-basis=346px></p><hr><h2 id=评论系统配置>评论系统配置</h2><h3 id=valine-配置>Valine 配置</h3><p>一般来说 Valine 是 Hugo 主题里自带集成的，去稍微配置下就可以使用了；以我正在使用的 Zzo 主题演示。打开博客根目录，找到 <strong>config/_default</strong> 打开 <strong>params.toml</strong> 配置文件，然后按照下面注释进行修改：</p><p>有的主题就是在根目录的 <strong>config.toml</strong> ，需要自己去查看；所有修改应该基于博客根目录，不要去动主题中的文件；渲染时会对主题目录的配置进行覆盖，即：将主题中需要修改的文件复制到博客根目录对应位置，再修改博客根目录文件。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=c># comment</span>
</span></span><span class=line><span class=cl><span class=nx>enableComment</span> <span class=p>=</span> <span class=kc>true</span> <span class=c># 开启评论</span>
</span></span><span class=line><span class=cl><span class=nx>disqus_shortname</span> <span class=p>=</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>commento</span> <span class=p>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Valine.</span>
</span></span><span class=line><span class=cl><span class=c># You can get your appid and appkey from https://leancloud.cn</span>
</span></span><span class=line><span class=cl><span class=c># more info please open https://valine.js.org</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>valine</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=nx>enable</span> <span class=p>=</span> <span class=kc>true</span> <span class=c># 开启 Valine</span>
</span></span><span class=line><span class=cl>  <span class=nx>appId</span> <span class=p>=</span> <span class=s1>&#39;&#39;</span> <span class=c># AppID 为 你在 LeanCloud 应用凭证中的 AppLD</span>
</span></span><span class=line><span class=cl>  <span class=nx>appKey</span> <span class=p>=</span> <span class=s1>&#39;&#39;</span> <span class=c># AppKey 为 你在 LeanCloud 应用凭证中的 AppKey</span>
</span></span><span class=line><span class=cl>  <span class=nx>notify</span> <span class=p>=</span> <span class=kc>false</span>  <span class=c># </span>
</span></span><span class=line><span class=cl>  <span class=nx>verify</span> <span class=p>=</span> <span class=kc>false</span> <span class=c># </span>
</span></span><span class=line><span class=cl>  <span class=nx>avatar</span> <span class=p>=</span> <span class=s1>&#39;mp&#39;</span> 
</span></span><span class=line><span class=cl>  <span class=nx>placeholder</span> <span class=p>=</span> <span class=s1>&#39;说点什么吧...&#39;</span>
</span></span><span class=line><span class=cl>  <span class=nx>visitor</span> <span class=p>=</span> <span class=kc>false</span>
</span></span></code></pre></div><blockquote><p>配置项及参数参考： <a class=link href=https://valine.js.org/configuration.htmlValine target=_blank rel=noopener>配置项
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p></blockquote><p>一般来说，主题的 Valine 评论系统，直接在主题配置文件中设置相应的参数开启即可。如果不是自带的可以往下看 Waline 的操作。</p><hr><h3 id=waline-配置>Waline 配置</h3><h4 id=通过-vercel-部署服务端>通过 Vercel 部署服务端</h4><ul><li>这一部分可以直接看官方给出的教程 <a class=link href=https://waline.js.org/guide/get-started.html#vercel-%e9%83%a8%e7%bd%b2-%e6%9c%8d%e5%8a%a1%e7%ab%afVercel target=_blank rel=noopener>部署 ( 服务端 )
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li></ul><h4 id=引入-waline-及配置>引入 Waline 及配置</h4><p>我正在用的 Zzo 主题是不自带 Waline 的，所以我就要进行引入；Zzo 主题关于评论系统的文件夹与文件分别为：</p><blockquote><ul><li>~/themes/zzo/layouts/partials/comments</li><li>~/themes/zzo/layouts/partials/comments/comments.html</li><li>~/config/_default/params.toml</li></ul></blockquote><p>和上文一样，修改主题的原则是将主题目录中的文件复制到你博客所在根目录的相同位置进行修改，不要对主题文件夹中的文件进行直接修改；这样做的好处是以后更新主题时，你所做的修改不会被覆盖。</p><p>首先打开主题文件夹的 <strong>layouts/partials/comments</strong> 找到 <strong>comments.html</strong> 和 <strong>valine.html</strong> 将其复制到博客根目录对应位置，先打开 <strong>comment.html</strong> 进行编辑，按照相同的格式，加上 Waline：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>{{ if $.Param &#34;enableComment&#34; }}
</span></span><span class=line><span class=cl>  {{ if $.Param &#34;disqus_shortname&#34; }}
</span></span><span class=line><span class=cl>    {{ partial &#34;comments/disqus.html&#34; . }}
</span></span><span class=line><span class=cl>  {{ else if $.Param &#34;commento&#34; }}
</span></span><span class=line><span class=cl>    {{ partial &#34;comments/commento.html&#34; . }}
</span></span><span class=line><span class=cl>  {{ else if $.Param &#34;valine.enable&#34; }}
</span></span><span class=line><span class=cl>    {{ partial &#34;comments/valine.html&#34; . }}
</span></span><span class=line><span class=cl>  {{ else if $.Param &#34;changyan.changyanAppid&#34; }}
</span></span><span class=line><span class=cl>    {{ partial &#34;comments/changyan.html&#34; . }}
</span></span><span class=line><span class=cl>  {{ else if $.Param &#34;livere.livereUID&#34; }}
</span></span><span class=line><span class=cl>    {{ partial &#34;comments/livere.html&#34; . }}
</span></span><span class=line><span class=cl>  {{ else if $.Param &#34;gitment.owner&#34; }}
</span></span><span class=line><span class=cl>    {{ partial &#34;comments/gitment.html&#34; . }}
</span></span><span class=line><span class=cl>  {{ else if $.Param &#34;gitalk.owner&#34; }}
</span></span><span class=line><span class=cl>    {{ partial &#34;comments/gitalk.html&#34; . }}
</span></span><span class=line><span class=cl>  {{ else if $.Param &#34;utterances.owner&#34; }}
</span></span><span class=line><span class=cl>    {{ partial &#34;comments/utterances.html&#34; . }}
</span></span><span class=line><span class=cl>  {{ else if $.Param &#34;isso.enable&#34; }}
</span></span><span class=line><span class=cl>    {{ partial &#34;comments/isso.html&#34; . }}
</span></span><span class=line><span class=cl>  {{ else if $.Param &#34;telegram.enable&#34; }}
</span></span><span class=line><span class=cl>    {{ partial &#34;comments/telegram.html&#34; . }}
</span></span><span class=line><span class=cl><span class=gi>+ {{ else if $.Param &#34;waline.enable&#34; }}
</span></span></span><span class=line><span class=cl><span class=gi>+   {{ partial &#34;comments/waline.html&#34; . }}  
</span></span></span><span class=line><span class=cl><span class=gi></span>  {{ end }}
</span></span><span class=line><span class=cl>{{ end }}
</span></span></code></pre></div><p>然后再打开 <strong>waline.html</strong> ，按照官方给出的 <a class=link href=https://waline.js.org/migration/valine.html target=_blank rel=noopener>从 Valine 迁移
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>
</a>进行引入：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl><span class=gd>-&lt;script src=&#39;//unpkg.com/valine/dist/Valine.min.js&#39;&gt;&lt;/script&gt;
</span></span></span><span class=line><span class=cl><span class=gd></span><span class=gi>+&lt;script src=&#39;//unpkg.com/@waline/client@v2/dist/waline.js&#39;&gt;&lt;/script&gt;
</span></span></span><span class=line><span class=cl><span class=gi>+&lt;link href=&#39;//unpkg.com/@waline/client@v2/dist/waline.css&#39; rel=&#39;stylesheet&#39; /&gt;
</span></span></span><span class=line><span class=cl><span class=gi></span> &lt;script&gt;
</span></span><span class=line><span class=cl><span class=gd>-  new Valine({
</span></span></span><span class=line><span class=cl><span class=gd></span><span class=gi>+  Waline.init({
</span></span></span><span class=line><span class=cl><span class=gi></span>     el: &#39;#vcomments&#39;,
</span></span><span class=line><span class=cl><span class=gd>-    appId: &#39;Your appId&#39;,
</span></span></span><span class=line><span class=cl><span class=gd>-    appKey: &#39;Your appKey&#39;
</span></span></span><span class=line><span class=cl><span class=gd></span><span class=gi>+    serverURL: &#39;YOUR SERVER URL&#39;
</span></span></span><span class=line><span class=cl><span class=gi></span>   });
</span></span><span class=line><span class=cl> &lt;/script&gt;
</span></span></code></pre></div><p>基本的引入完成后，打开 <strong>config/_default/params.toml</strong> 添加 Waline 并设置：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>waline</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=nx>enable</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=nx>ServerURL</span> <span class=p>=</span> <span class=s1>&#39;&#39;</span> <span class=c># 服务端网址是你给 Vercel 服务端绑定的域名</span>
</span></span></code></pre></div><p>如果你想进行一些个性化的设置，可以参考以下官网。下面是我自己的一个简单的配置：</p><ul><li><p><strong>~/config/_default/params.tomlparams.toml</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>waline</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>enable</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=nx>ServerURL</span> <span class=p>=</span> <span class=s1>&#39;https://domain.com&#39;</span>
</span></span><span class=line><span class=cl><span class=nx>Lang</span> <span class=p>=</span> <span class=s1>&#39;zh-CN&#39;</span>
</span></span><span class=line><span class=cl><span class=nx>Meta</span> <span class=p>=</span> <span class=p>[</span><span class=s1>&#39;nick&#39;</span><span class=p>,</span> <span class=s1>&#39;mail&#39;</span><span class=p>,</span> <span class=s1>&#39;link&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>RequiredMeta</span> <span class=p>=</span> <span class=p>[</span><span class=s1>&#39;nick&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>Login</span> <span class=p>=</span> <span class=s1>&#39;disable&#39;</span>
</span></span><span class=line><span class=cl><span class=nx>PageSize</span> <span class=p>=</span> <span class=s1>&#39;10&#39;</span>
</span></span><span class=line><span class=cl><span class=nx>HighLighter</span> <span class=p>=</span> <span class=kc>true</span>
</span></span></code></pre></div></li><li><p><strong>~/layouts/partials/comments/waline.html</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;vcomments&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#39;//unpkg.com/@waline/client@v2/dist/waline.js&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#39;//unpkg.com/@waline/client@v2/dist/waline.css&#39;</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#39;stylesheet&#39;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>Waline</span><span class=p>.</span><span class=nx>init</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>el</span><span class=o>:</span> <span class=s1>&#39;#vcomments&#39;</span> <span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>locale</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>placeholder</span><span class=o>:</span> <span class=s1>&#39;请注意评论礼仪，发布攻击性、无意义内容将会视为垃圾评论进行删除处理。&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>nick</span><span class=o>:</span> <span class=s1>&#39;昵称*&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>serverURL</span><span class=o>:</span> <span class=s1>&#39;{{ .Site.Params.waline.ServerURL }}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>emoji</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;//unpkg.com/@waline/emojis@1.1.0/alus&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;//unpkg.com/@waline/emojis@1.1.0/tieba&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nx>lang</span><span class=o>:</span> <span class=s1>&#39;{{ .Site.Params.waline.Lang }}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>meta</span><span class=o>:</span> <span class=p>{{</span> <span class=p>.</span><span class=nx>Site</span><span class=p>.</span><span class=nx>Params</span><span class=p>.</span><span class=nx>waline</span><span class=p>.</span><span class=nx>Meta</span> <span class=p>}},</span>
</span></span><span class=line><span class=cl>    <span class=nx>requiredMeta</span><span class=o>:</span> <span class=p>{{</span> <span class=p>.</span><span class=nx>Site</span><span class=p>.</span><span class=nx>Params</span><span class=p>.</span><span class=nx>waline</span><span class=p>.</span><span class=nx>RequiredMeta</span> <span class=p>}},</span>
</span></span><span class=line><span class=cl>    <span class=nx>login</span><span class=o>:</span> <span class=s1>&#39;{{ .Site.Params.waline.Login }}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>pageSize</span><span class=o>:</span> <span class=s1>&#39;{{ .Site.Params.waline.PageSize }}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>highlighter</span><span class=o>:</span> <span class=p>{{</span> <span class=p>.</span><span class=nx>Site</span><span class=p>.</span><span class=nx>Params</span><span class=p>.</span><span class=nx>waline</span><span class=p>.</span><span class=nx>Highlighter</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div></li></ul><p>配置完成之后你就可以在运行 <code>hugo server</code> 在本地进行评论测试了:</p><p><img src=/archives/hugo_comment/3.png width=1019 height=610 srcset="/archives/hugo_comment/3_hu5eb5debdfb377ae4be91a9535e096deb_40768_480x0_resize_box_3.png 480w, /archives/hugo_comment/3_hu5eb5debdfb377ae4be91a9535e096deb_40768_1024x0_resize_box_3.png 1024w" loading=lazy alt="◎ 本地测试" class=gallery-image data-flex-grow=167 data-flex-basis=400px></p><hr><h3 id=评论管理>评论管理</h3><p>Waline 带有后台，可以实现对评论的管理。部署完成后访问 <code>&lt;serverURL>/ui/register</code> 进行注册，第一个注册的账户会被设定成管理员。</p><p>登录成功后就可以看到评论管理的界面了。在这里可以修改、标记或删除评论。在评论的时候，如果选择登陆账户后进行评论，你的评论昵称后面会显示「博主」字样。如果没有登陆后台评论，一样是不会显示的。</p><h2 id=总结>总结</h2><p>以上就是 Hugo 博客添加评论系统的过程，希望能给大家做一个参考；至于使用什么评论系统也是看自己的喜好和选择了。没有什么是最好的，只有最适合你自己的。到此 Hugo 搭建博客的一个入门流程也算是结束了，以后自己折腾多了，有时间了；也会进行更进一步的发掘和分享。</p><h2 id=参考资料>参考资料</h2><ol><li><p><a class=link href=https://leancloud.app target=_blank rel=noopener>LeanCloud 国际版
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p></li><li><p><a class=link href=https://valine.js.org target=_blank rel=noopener>Valine 官网
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p></li><li><p><a class=link href=https://vercel.com target=_blank rel=noopener>Vrecel 官网
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p></li><li><p><a class=link href=https://waline.js.org target=_blank rel=noopener>Waline 官网
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p></li></ol></section><footer class=article-footer><section class=article-tags><a href=/tags/hugo/>Hugo</a>
<a href=/tags/blog/>Blog</a>
<a href=/tags/valine/>Valine</a>
<a href=/tags/waline/>Waline</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><footer class=site-footer><section class=copyright>&copy;
2022 -
2024 Kitin</section><section class=powerby><a href=https://beian.miit.gov.cn/ target=_blank>赣ICP备2024024305号</a><br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.21.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script src=https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/js/nprogress.min.js integrity=sha384-bHDlAEUFxsRI7JfULv3DTpL2IXbbgn4JHQJibgo5iiXSK6Iu8muwqHANhun74Cqg crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/css/nprogress.css integrity=sha384-KJyhr2syt5+4M9Pz5dipCvTrtvOmLk/olWVdfhAp858UCa64Ia5GFpTN7+G4BWpE crossorigin=anonymous><script>NProgress.start(),document.addEventListener("readystatechange",()=>{document.readyState==="interactive"&&NProgress.inc(.8),document.readyState==="complete"&&NProgress.done()})</script></body></html>