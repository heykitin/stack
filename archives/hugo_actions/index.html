<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='Github Actions 使用入门, 通过 Github 提供的 Actions 服务优雅地将 Hugo 博客自动部署到Github Pages 或云服务器'><title>使用 Github Actions 自动化部署 Hugo 博客</title>
<link rel=canonical href=/archives/hugo_actions/><link rel=stylesheet href=/scss/style.min.cb8e145b227b14b80400c95bf4264a641f083fd1e4780883a006419fcbedecd4.css><meta property='og:title' content='使用 Github Actions 自动化部署 Hugo 博客'><meta property='og:description' content='Github Actions 使用入门, 通过 Github 提供的 Actions 服务优雅地将 Hugo 博客自动部署到Github Pages 或云服务器'><meta property='og:url' content='/archives/hugo_actions/'><meta property='og:site_name' content="Kitin's"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Github'><meta property='article:tag' content='Hugo'><meta property='article:tag' content='Github Pages'><meta property='article:tag' content='Github Actions'><meta property='article:tag' content='Blog'><meta property='article:published_time' content='2022-07-16T13:25:48+08:00'><meta property='article:modified_time' content='2022-07-21T10:50:47+08:00'><meta name=twitter:title content="使用 Github Actions 自动化部署 Hugo 博客"><meta name=twitter:description content="Github Actions 使用入门, 通过 Github 提供的 Actions 服务优雅地将 Hugo 博客自动部署到Github Pages 或云服务器"><link rel="shortcut icon" href=/favicon.ico><style>:root{--sys-font-family:"Noto Serif SC";--zh-font-family:"Noto Serif SC";--base-font-family:"Noto Serif SC";--code-font-family:"Convergence";--article-font-family:"Noto Serif SC"}</style><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC&family=Convergence:wght@400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><div id=article-toolbar style=position:sticky;top:5px;z-index:1000><a href=/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>返回</span></a></div><aside class="sidebar right-sidebar sticky"><button id=toggle-toc>Toc</button><section class="widget archives" id=toc-container><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#前言>前言</a></li><li><a href=#介绍与准备>介绍与准备</a><ol><li><a href=#github-actions-是什么>Github Actions 是什么</a></li><li><a href=#准备工作>准备工作</a></li></ol></li><li><a href=#配置-github-actions>配置 Github Actions</a><ol><li><a href=#创建配置文件>创建配置文件</a></li><li><a href=#创建-token>创建 Token</a><ol><li><a href=#personal-token>Personal Token</a></li><li><a href=#actions-secrets-token>Actions Secrets Token</a></li></ol></li></ol></li><li><a href=#推送及更新>推送及更新</a></li><li><a href=#参考资料>参考资料</a></li><li><a href=#总结>总结</a></li></ol></nav></div></section><style>#mulu{z-index:9999}#toc-container{display:none;position:fixed;bottom:21%;right:60px;background-color:var(--card-background);padding:10px;border:1px solid #96979a50;border-radius:var(--card-border-radius);box-shadow:rgba(14,30,37,.12)0 2px 4px,rgba(14,30,37,.32)0 2px 16px;z-index:9998!important;max-height:80vh;overflow-y:auto;width:auto;max-width:290px}#toggle-toc{position:fixed;bottom:22%;right:20px;padding:10px;z-index:9998!important;border:0 solid #96979a50;border-radius:7px;box-shadow:var(--shadow-l1);background-color:#00640010;color:#34495e;display:block;margin-bottom:10px;cursor:pointer;font-size:1.2rem}.widget--toc #TableOfContents{overflow-x:auto;max-height:66vh;width:auto}@media screen and (max-width:768px){#toggle-toc{bottom:100px}}</style><script>var toggleButton=document.getElementById("toggle-toc"),tocContainer=document.getElementById("toc-container"),scrollThreshold=200;window.addEventListener("scroll",function(){var e=window.scrollY||window.pageYOffset;e>=scrollThreshold?toggleButton.style.display="block":toggleButton.style.display="none"}),toggleButton.addEventListener("click",function(){tocContainer.style.display==="none"||tocContainer.style.display===""?tocContainer.style.display="block":tocContainer.style.display="none"}),toggleButton.addEventListener("mouseover",function(){tocContainer.style.display="block"}),document.addEventListener("click",function(e){!tocContainer.contains(e.target)&&e.target!==toggleButton&&(tocContainer.style.display="none")})</script></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E5%AD%A6%E4%B9%A0/>学习</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/archives/hugo_actions/>使用 Github Actions 自动化部署 Hugo 博客</a></h2><h3 class=article-subtitle>Github Actions 使用入门, 通过 Github 提供的 Actions 服务优雅地将 Hugo 博客自动部署到Github Pages 或云服务器</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jul 16, 2022</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 4 分钟</time></div></footer></div></header><section class=article-content><h2 id=前言>前言</h2><p>之前在 <a class=link href=/archives/hugo/>《使用 Hugo 搭建个人博客及部署》
</a>一文中, 我讲了通过 Hugo 来搭建个人博客, 并部署到 Github Pages 来实现一个在线访问.但是这样手动部署一开始还觉得比较新奇有趣, 时间一长的话难免会觉得有些麻烦, 一有什么改动就要全部重新部署, 那么本文就将讲一下通过 <code>Github Actions</code> 来实现将我们的 Hugo 博客自动部署到 Github Pages 或者我们自己的云服务器上, 现在就一起来看一下.</p><p><strong>注意</strong>: 本文所有操作的前提条件是在 <a class=link href=/archives/hugo/>《使用 Hugo 搭建个人博客及部署》
</a>一文的基础上, 可以先行查阅.</p><hr><h2 id=介绍与准备>介绍与准备</h2><h3 id=github-actions-是什么>Github Actions 是什么</h3><p>GitHub Actions 是一种持续集成和持续交付 (CI/CD) 平台, 可用于自动执行生成、测试和部署管道.你可以创建工作流来构建和测试存储库的每个拉取请求, 或将合并的拉取请求部署到生产环境.
GitHub 提供 Linux、Windows 和 macOS 虚拟机来运行你的工作流程, 或者你可以在自己的数据中心或云基础架构中托管自己的自托管运行器.</p><h3 id=准备工作>准备工作</h3><p>以本文描述所说, 通过 Github 提供的 Actions 服务将 Hugo 博客自动部署到Github Pages 和云服务器, 那就需要以下准备:</p><ol><li>存放 Hugo 博客项目的仓库, 该仓库拥有用于生成博客的 Markdown 文件, 生成静态博客的配置文件、主题等等; 也就是相当于我们本地博客的根目录, 该仓库可以设为私有.</li><li>存放 Hugo 博客生成的静态文件仓库, 用于 Github Pages 进行访问; 仓库名为 <code>username.github.io</code> , 该仓库为开源.</li><li>服务器或者虚拟主机, 是你自己购买的, 同样用于存放 Hugo 博客生成的静态文件.</li></ol><p>下面一步步来进行操作.</p><hr><h2 id=配置-github-actions>配置 Github Actions</h2><h3 id=创建配置文件>创建配置文件</h3><p>首先, 在本地博客仓库根目录下, 创建 <code>.github/workflows/depoly.yaml</code> 文件名 depoly 随意, 这个就是 Github Actions 配置文件, 然后打开 VS Code 进行编辑; 复制下面的内容, 粘贴进去, 然后根据注释进行修改; 操作完成后删除注释并保存:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>main</span><span class=w> </span><span class=c># 触发条件, 在 push 到 main 分支后</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>workflow_dispatch</span><span class=p>:</span><span class=w> </span><span class=c># 触发条件, 在 Github 仓库 Action 工具手动调用</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w> </span><span class=c># 任务</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build-and-deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w> </span><span class=c># 指定虚拟机环境为 Ubuntu 新版</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout</span><span class=w> </span><span class=c># 拉取代码</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w> </span><span class=c># 使用其他用户配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=c># 包含子模块,也就是链接的主题</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Hugo</span><span class=w> </span><span class=c># 安装 Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-hugo@v2</span><span class=w> </span><span class=c># 使用其他用户配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>hugo-version</span><span class=p>:</span><span class=w> </span><span class=l>latest</span><span class=w> </span><span class=c># Hugo 版本选择</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>extended</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build Hugo</span><span class=w> </span><span class=c># 生成博客静态文件</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>hugo --minify</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy GhPages</span><span class=w> </span><span class=c># 部署到 Github Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-gh-pages@v3</span><span class=w> </span><span class=c># 使用其他用户配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>personal_token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.PERSONAL_TOKEN }}</span><span class=w> </span><span class=c># Personal Token</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>external_repository</span><span class=p>:</span><span class=w> </span><span class=l>username/username.github.io</span><span class=w> </span><span class=c># Github Pages 仓库名, username 换成你的</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>publish_branch</span><span class=p>:</span><span class=w> </span><span class=l>main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>publish_dir</span><span class=p>:</span><span class=w> </span><span class=l>./public</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>commit_message</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.event.head_commit.message }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy To VPS</span><span class=w> </span><span class=c># 部署到个人服务器</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>cross-the-world/scp-pipeline@master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.DC_HOST }}</span><span class=w> </span><span class=c># Actions Secrets Token</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.DC_USER }}</span><span class=w> </span><span class=c># Actions Secrets Token</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>pass</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.DC_PASS }}</span><span class=w> </span><span class=c># Actions Secrets Token</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.DC_PORT }}</span><span class=w> </span><span class=c># Actions Secrets Token</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>connect_timeout</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>local</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;./public/*&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>remote</span><span class=p>:</span><span class=w> </span><span class=l>/var/www/html/</span><span class=w> </span><span class=c># 网站根目录</span><span class=w>
</span></span></span></code></pre></div><blockquote><p>如果你不需要部署到个人服务器，可以将最后一个 <code>Action</code> (部署到个人服务器) 删除</p></blockquote><p>人看麻了? 没关系, 我们只要明白少数几个地方即可, 我来慢慢梳理:</p><ul><li><code>on</code> 字段指定触发工作流的条件, 通常是某些事件, 如：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w> </span><span class=l>push</span><span class=w> </span><span class=c># 指定 push 事件可以触发</span><span class=w>
</span></span></span></code></pre></div><ul><li><p><code>jobs</code>字段表示需要执行的任务</p></li><li><p><code>steps</code> 字段表示任务流程, 我们这个配置流程为:</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>steps</span><span class=p>:</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Depoly GhPages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Depoly TO VPS</span><span class=w>
</span></span></span></code></pre></div><ul><li><p><code>steps</code> 字段下的 <code>name</code> , <code>use</code> , <code>with</code> 加起来就是一个 Action</p></li><li><p><code>name</code> 表示一个 Action 的名称</p></li><li><p><code>use</code> 表示使用某个别人写好的插件</p></li><li><p><code>with</code> 表示传递给插件的参数</p></li></ul><hr><h3 id=创建-token>创建 Token</h3><p>重点来了, 现在配置文件已经编辑好了, 我们需要创建相对应的 Token 来给 Actions 使用</p><h4 id=personal-token>Personal Token</h4><p>打开 Github 点击 <code>右上角头像 - Settings - Developer setting - Personal access tokens - Generate new token</code> 创建一个 Token, 记得要勾选 <code>repo</code> 和 <code>workflow</code> 权限:</p><p><img src=/archives/hugo_actions/1.png width=922 height=747 srcset="/archives/hugo_actions/1_hu3522c9be6b2dad825089e416752b4a96_59902_480x0_resize_box_3.png 480w, /archives/hugo_actions/1_hu3522c9be6b2dad825089e416752b4a96_59902_1024x0_resize_box_3.png 1024w" loading=lazy alt="◎ 创建Token" class=gallery-image data-flex-grow=123 data-flex-basis=296px></p><p>生成后复制 Token <strong>注意: Token 只会出现一次</strong></p><p><img src=/archives/hugo_actions/2.png width=867 height=317 srcset="/archives/hugo_actions/2_hu8fd7383f66fad8c9a9876d2a4e51ea72_20800_480x0_resize_box_3.png 480w, /archives/hugo_actions/2_hu8fd7383f66fad8c9a9876d2a4e51ea72_20800_1024x0_resize_box_3.png 1024w" loading=lazy alt="◎ Token展示" class=gallery-image data-flex-grow=273 data-flex-basis=656px></p><p>复制后打开存放 Hugo 博客的仓库, 点击 <code>Settings - Secrets - Actions - New repository secret</code> 输入刚才复制的 <code>Token</code> , 名字为 <code>PERSONAL_TOKEN</code></p><p><img src=/archives/hugo_actions/3.png width=1007 height=555 srcset="/archives/hugo_actions/3_huc13b2c964835fd1c93006ef2ced365b3_16813_480x0_resize_box_3.png 480w, /archives/hugo_actions/3_huc13b2c964835fd1c93006ef2ced365b3_16813_1024x0_resize_box_3.png 1024w" loading=lazy alt="◎ 创建 Secret" class=gallery-image data-flex-grow=181 data-flex-basis=435px></p><p>如果你不需要将博客静态文件部署到个人服务器, 那么到这里就结束了. 下面来讲下部署到个人服务器的设置</p><h4 id=actions-secrets-token>Actions Secrets Token</h4><p>在 Actions 配置文件中, 最后一个流程是部署到个人服务器, 那么这里有几个选项也是需要创建 Token 的, 分别为：</p><ul><li><code>host</code> 你的服务器 IP</li><li><code>user</code> 登陆用户名</li><li><code>pass</code> 登陆密码</li><li><code>port</code> SSH 端口，默认为 22, 如果修改了端口，或者供应商有指定端口，填入指定端口即可</li></ul><p>以 <code>host</code> 为例, 在存放 Hugo 博客的仓库, 点击 <code>Settings - Secrets - Actions - New repository secret</code> 输入 Token Name 为 <code>DC_HOST</code> , Secret 为你的服务器 IP 地址, 对应配置文件中的 <code>${{ secrets.DC_HOST }}</code> 项</p><p><img src=/archives/hugo_actions/4.png width=996 height=579 srcset="/archives/hugo_actions/4_huf4571d29c961448e5cb85460feb31d56_20417_480x0_resize_box_3.png 480w, /archives/hugo_actions/4_huf4571d29c961448e5cb85460feb31d56_20417_1024x0_resize_box_3.png 1024w" loading=lazy alt="◎ 创建 Secret" class=gallery-image data-flex-grow=172 data-flex-basis=412px></p><p>之后分别创建相对应的 Token ,然后修改最后一行 <code>remote</code> 网站根目录即可。</p><hr><h2 id=推送及更新>推送及更新</h2><p>全部配置完成之后, 我们就可以将配置文件进行推送了, 将我们的本地博客仓库推送到创建好的私密仓库中:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git init <span class=c1># 初始化仓库</span>
</span></span><span class=line><span class=cl>git branch -M main <span class=c1># 设置分支为main</span>
</span></span><span class=line><span class=cl>git add . <span class=c1># 添加全部文件</span>
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;Hugo 博客仓库第一次提交&#34;</span> <span class=c1># 添加提交信息</span>
</span></span><span class=line><span class=cl>git remote add origin git@github.com:username/name.git <span class=c1># 添加远程仓库, 格式为: 用户名/仓库名 .git</span>
</span></span><span class=line><span class=cl>git push origin main <span class=c1># 推送</span>
</span></span></code></pre></div><p>推送完成后，等待一会然后打开 Hugo 仓库的 Actions 我们就可以看到工作流已经完成:</p><p><img src=/archives/hugo_actions/5.png width=1161 height=682 srcset="/archives/hugo_actions/5_huc21d97b91565e9272aafaedea766acc8_54304_480x0_resize_box_3.png 480w, /archives/hugo_actions/5_huc21d97b91565e9272aafaedea766acc8_54304_1024x0_resize_box_3.png 1024w" loading=lazy alt="◎ 工作流状态" class=gallery-image data-flex-grow=170 data-flex-basis=408px></p><p>再打开存放静态文件的仓库, 可以看到静态文件已经自动部署完毕并且生成 Github Pages 了:</p><p><img src=/archives/hugo_actions/6.png width=1288 height=830 srcset="/archives/hugo_actions/6_hue00c9a32992b36571c003f698c72598d_123373_480x0_resize_box_3.png 480w, /archives/hugo_actions/6_hue00c9a32992b36571c003f698c72598d_123373_1024x0_resize_box_3.png 1024w" loading=lazy alt="◎ 部署完成" class=gallery-image data-flex-grow=155 data-flex-basis=372px></p><hr><h2 id=参考资料>参考资料</h2><ol><li><p><a class=link href=https://docs.github.com/cn/actions/GithubGithub target=_blank rel=noopener>Actions 官方文档
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p></li><li><p><a class=link href=https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.htmlGithub target=_blank rel=noopener>Actions 入门教程
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p></li><li><p><a class=link href="https://github.com/marketplace?type=actionsGithub" target=_blank rel=noopener>Actions 插件市场
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p></li></ol><h2 id=总结>总结</h2><p>以上就是通过 Github Actions 实现的 Hugo 博客自动部署系统, 以后只需要在本地写好文章, 然后 Push 到 Github 的 Hugo 博客仓库中就可以自动进行静态文件生成和部署啦,可以说是方便又好用. 最重要它还是免费的, 这样写博客的方式是否够优雅呢?</p></section><footer class=article-footer><section class=article-tags><a href=/tags/github/>Github</a>
<a href=/tags/hugo/>Hugo</a>
<a href=/tags/github-pages/>Github Pages</a>
<a href=/tags/github-actions/>Github Actions</a>
<a href=/tags/blog/>Blog</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>最后更新于 Jul 21, 2022</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/archives/hugo/><div class=article-details><h2 class=article-title>使用 Hugo 搭建个人博客及部署</h2></div></a></article><article><a href=/archives/how_to_write/><div class=article-details><h2 class=article-title>我写博客的方式</h2></div></a></article><article><a href=/archives/hugo_deploy/><div class=article-details><h2 class=article-title>Hugo 博客部署至托管服务提升访问体验</h2></div></a></article><article><a href=/archives/waline_deploy/><div class=article-details><h2 class=article-title>Waline 服务端独立部署方案</h2></div></a></article><article><a href=/archives/hugo_comment/><div class=article-details><h2 class=article-title>为 Hugo 博客开启评论系统</h2></div></a></article></div></div></aside><script src=//unpkg.com/@waline/client@v2/dist/waline.js></script><link href=//unpkg.com/@waline/client@v2/dist/waline.css rel=stylesheet><div id=waline class=waline-container></div><style>.waline-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding);--waline-font-size:var(--article-font-size)}.waline-container .wl-count{color:var(--card-text-color-main)}</style><script>Waline.init({dark:"auto",el:"#waline",emoji:["https://unpkg.com/@waline/emojis@1.0.1/weibo"],lang:"zh-CN",locale:{admin:"渣渣",link:"网址",mail:"邮箱",nick:"昵称",placeholder:"欢迎评论，请注意评论礼仪！",sofa:"来发评论吧~"},login:"disable",requiredMeta:["name","email"],serverURL:"https://comment.kitin.cn"})</script><footer class=site-footer><section class=copyright>&copy;
2022 -
2024 Kitin</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.21.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script>function backToTop(){window.scrollTo(0,0)}window.onload=function(){let t=this.document.documentElement.scrollTop||this.document.body.scrollTop,e=this.document.getElementById("back-to-top");t>0?e.style.display="inline":e.style.display="none"},window.onscroll=function(){let t=this.document.documentElement.scrollTop||this.document.body.scrollTop,e=this.document.getElementById("back-to-top");t<200?e.style.display="none":(e.style.display="inline",e.addEventListener("click",backToTop,!1))}</script><script src=https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/js/nprogress.min.js integrity=sha384-bHDlAEUFxsRI7JfULv3DTpL2IXbbgn4JHQJibgo5iiXSK6Iu8muwqHANhun74Cqg crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/css/nprogress.css integrity=sha384-KJyhr2syt5+4M9Pz5dipCvTrtvOmLk/olWVdfhAp858UCa64Ia5GFpTN7+G4BWpE crossorigin=anonymous><script>NProgress.start(),document.addEventListener("readystatechange",()=>{document.readyState==="interactive"&&NProgress.inc(.8),document.readyState==="complete"&&NProgress.done()})</script></body></html>